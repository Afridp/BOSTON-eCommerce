<%- include('./layouts/header.ejs') -%>


    <%- include('./layouts/navbar.ejs') -%>

        <section class="breadcrumb-option">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="breadcrumb__text">
                            <h4>Shop</h4>
                            <div class="breadcrumb__links">
                                <a href="/">Home</a>
                                <a href="/">Profile</a>
                                <span>Edit Profile</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>



        <section style="background-color: #eee;">
            <div class="container py-5">
                <div class="row">
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-body text-center">
                                <a href="/userProfile">
                                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6.webp"
                                        alt="avatar" class="rounded-circle img-fluid"
                                        style="width: 150px; border: 4px solid #fff;" />
                                </a>
                                <h5 class="my-3">
                                    <%= user.name %>
                                </h5>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">
                                        <a href="/orders" class="btn btn-outline-primary btn-block">Orders</a>
                                    </li>
                                    <li class="list-group-item">
                                        <a href="/manageAddress" class="btn btn-outline-primary btn-block">Manage
                                            Address</a>
                                    </li>
                                    <li class="list-group-item">
                                        <a href="/changePassword" class="btn btn-outline-primary btn-block">Change
                                            Password</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-8">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Edit Profile</h5>
                                <hr />
                                <form action="/editProfile" name="userForm" method="POST" onsubmit="">
                                    <div class="form-group row">
                                        <label for="firstName" class="col-sm-3 col-form-label">First Name</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="name" name="name"
                                                value="<%= user.name %>" required />
                                        </div>
                                    </div>


                                    <div class="form-group row">
                                        <label for="email" class="col-sm-3 col-form-label">Email</label>
                                        <div class="col-sm-9">
                                            <input type="email" class="form-control" id="email" name="email"
                                                value="<%= user.email %>" required readonly />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="phone" class="col-sm-3 col-form-label">Phone</label>
                                        <div class="col-sm-9">
                                            <input type="tel" class="form-control" id="mobile" name="mobile"
                                                value="<%= user.mobile %>" required />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <button type="submit" class="btn btn-primary btn-sm">Update Profile</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>



        <%- include('./layouts/footerNavbar.ejs') -%>

            <%- include('./layouts/footer.ejs') -%>

                <script>
                    let first_name = document.getElementById("name");

                    let phone_number = document.getElementById("mobile");

                    fname.addEventListener("input", () => {
                        if (name.value.trim() == "") {
                            name.setCustomValidity("Name must be filled out");
                        } else {
                            name.setCustomValidity("");
                        }
                    });

                    mobile.addEventListener("input", () => {
                        if (mobile.value.trim() == "") {
                            mobile.setCustomValidity("Phone number must be filled out");
                        } else if (isNaN(mobile.value)) {
                            mobile.setCustomValidity(
                                "Mobile Number should contain only digits from 0-9"
                            );
                        } else if (mobile.value.length < 10) {
                            mobile.setCustomValidity(
                                "Mobile number must be containing 10 digits"
                            );
                        } else {
                            mobile.setCustomValidity("");
                        }
                    })

                </script>